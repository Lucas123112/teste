<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visão Geral do Sistema Codi MES</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: 'Open Sans', sans-serif;
      }
      .slide-container {
        width: 1280px;
        min-height: 720px;
        background: #20307E;
        color: #F0F0F0;
        overflow: hidden;
        position: relative;
      }
      h1, h2, h3 {
        font-family: 'Montserrat', sans-serif;
        font-weight: 700;
      }
      .title {
        font-size: 36px;
        line-height: 1.2;
        margin-bottom: 24px;
        color: #F0F0F0;
        position: relative;
      }
      .title::after {
        content: '';
        position: absolute;
        bottom: -10px;
        left: 0;
        width: 80px;
        height: 4px;
        background: #00CC66;
      }
      .benefit-item {
        transition: all 0.3s ease;
        border-left: 3px solid transparent;
      }
      .benefit-item:hover {
        border-left: 3px solid #00CC66;
        transform: translateX(5px);
      }
      .circuit-pattern {
        position: absolute;
        width: 100%;
        height: 100%;
        opacity: 0.05;
        background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2300cc66' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      }
      .tech-line {
        position: absolute;
        background: linear-gradient(90deg, rgba(0, 204, 102, 0.1) 0%, rgba(0, 204, 102, 0.3) 100%);
        height: 1px;
      }
      .architecture-container {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 8px;
        padding: 16px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
      }
      #architecture-diagram {
        width: 100%;
      }
      .node {
        cursor: pointer;
      }
      .node rect {
        stroke: #00CC66;
        stroke-width: 2px;
      }
      .node text {
        font-family: 'Open Sans', sans-serif;
        font-size: 12px;
        fill: #F0F0F0;
      }
      .link {
        fill: none;
        stroke: #2E4A7F;
        stroke-width: 2px;
      }
    </style>
  </head>
  <body>
    <div class="slide-container flex flex-col p-16 relative">
      <div class="circuit-pattern"></div>
      
      <div class="tech-line" style="width: 200px; top: 15%; right: 10%; transform: rotate(-15deg);"></div>
      <div class="tech-line" style="width: 150px; bottom: 20%; left: 5%; transform: rotate(25deg);"></div>
      
      <div class="z-10">
        <h1 class="title">Visão Geral do Sistema CODI MES</h1>
        
        <div class="grid grid-cols-2 gap-12 mt-8">
          <div>
            <h3 class="text-2xl mb-4 text-white">O que é o Sistema MES?</h3>
            <p class="mb-6">
              O Manufacturing Execution System (MES) é uma solução completa para 
              gerenciamento e controle de processos produtivos, conectando o chão de fábrica 
              aos sistemas de gestão empresarial.
            </p>
            
            <div class="architecture-container mb-6">
              <h4 class="text-xl mb-4 text-center">Arquitetura Simplificada</h4>
              <div id="architecture-diagram" style="height: 250px;"></div> 
            </div>
            
            <p class="text-sm text-gray-300 italic">
              O CODI MES se integra perfeitamente com sistemas ERP, equipamentos de chão de fábrica 
              e dispositivos IoT, criando um ecossistema digital completo para sua indústria.
            </p>
          </div>
          
          <div>
            <h3 class="text-2xl mb-4 text-white">Principais Benefícios</h3>
            
            <div class="space-y-4">
              <div class="benefit-item bg-opacity-10 bg-white p-4 rounded-lg">
                <h4 class="text-xl mb-2 font-semibold flex items-center">
                  <span class="text-green-400 mr-2"><i class="fas fa-check-circle"></i></span>
                  Visibilidade em Tempo Real
                </h4>
                <p>Monitore toda a operação com dashboards intuitivos e alertas instantâneos</p>
              </div>
              
              <div class="benefit-item bg-opacity-10 bg-white p-4 rounded-lg">
                <h4 class="text-xl mb-2 font-semibold flex items-center">
                  <span class="text-green-400 mr-2"><i class="fas fa-check-circle"></i></span>
                  Controle de Qualidade Avançado
                </h4>
                <p>Garanta conformidade e rastreabilidade em todos os processos produtivos</p>
              </div>
              
              <div class="benefit-item bg-opacity-10 bg-white p-4 rounded-lg">
                <h4 class="text-xl mb-2 font-semibold flex items-center">
                  <span class="text-green-400 mr-2"><i class="fas fa-check-circle"></i></span>
                  Otimização de Recursos
                </h4>
                <p>Reduza desperdícios e maximize a eficiência de equipamentos e mão de obra</p>
              </div>
              
              <div class="benefit-item bg-opacity-10 bg-white p-4 rounded-lg">
                <h4 class="text-xl mb-2 font-semibold flex items-center">
                  <span class="text-green-400 mr-2"><i class="fas fa-check-circle"></i></span>
                  Tomada de Decisão Inteligente
                </h4>
                <p>Utilize dados e análises avançadas para decisões estratégicas precisas</p>
              </div>
              
              <div class="benefit-item bg-opacity-10 bg-white p-4 rounded-lg">
                <h4 class="text-xl mb-2 font-semibold flex items-center">
                  <span class="text-green-400 mr-2"><i class="fas fa-check-circle"></i></span>
                  Adaptabilidade e Escalabilidade
                </h4>
                <p>Sistema modular que cresce e se adapta às necessidades do seu negócio</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="absolute bottom-8 right-8">
        <div class="bg-white bg-opacity-10 px-4 py-2 rounded-lg">
          <p class="text-lg font-bold">CODI</p>
        </div>
      </div>
    </div>
    
    <script>
      const data = {
        name: "CODI MES",
        children: [
          { 
            name: "Nível Estratégico", 
            children: [
              { name: "BI" },
              { name: "ERP" }
            ]
          },
          { 
            name: "Nível Tático", 
            children: [
              { name: "Planejamento" },
      
            ]
          },
          { 
            name: "Nível Operacional", 
            children: [
              { name: "Manufatura" },
        
  
            ]
          }
        ]
      };

      const container = document.getElementById('architecture-diagram');
      const width = container.clientWidth;
      const height = container.clientHeight;

      const svg = d3.select("#architecture-diagram")
        .append("svg")
        .attr("width", width)
        .attr("height", height);
        
      const g = svg.append("g");
        
      // Usamos .size() para definir a área total disponível para a árvore
      // e ajustamos os padding para que a árvore caiba dentro.
      const tree = d3.tree()
        .size([width - 40, height - 40]) // Subtrai padding das dimensões do container
        .separation((a, b) => (a.parent == b.parent ? 1 : 1.5)); 

      const root = d3.hierarchy(data);
      tree(root);

      // Encontra a extensão da árvore para centralizá-la
      let minX = Infinity, maxX = -Infinity, minY = Infinity, maxY = -Infinity;
      root.descendants().forEach(d => {
          if (d.x < minX) minX = d.x;
          if (d.x > maxX) maxX = d.x;
          if (d.y < minY) minY = d.y;
          if (d.y > maxY) maxY = d.y;
      });

      // Calcula o deslocamento para centralizar a árvore
      // Adiciona 20px de padding em cada lado (daí o +40 no dividendo)
      const translateX = (width - (maxX - minX)) / 2 - minX;
      // Adiciona 20px de padding em cima e embaixo
      const translateY = (height - (maxY - minY)) / 2 - minY;

      // Aplica a translação ao grupo principal
      g.attr("transform", `translate(${translateX}, ${translateY})`);
      
      // Links
      g.selectAll(".link")
        .data(root.links())
        .enter()
        .append("path")
        .attr("class", "link")
        .attr("d", d3.linkVertical()
          .x(d => d.x)
          .y(d => d.y));
      
      // Nodes
      const node = g.selectAll(".node")
        .data(root.descendants())
        .enter()
        .append("g")
        .attr("class", "node")
        .attr("transform", d => `translate(${d.x},${d.y})`);
      
      // Node rectangles
      node.append("rect")
        .attr("width", d => d.data.name.length * 7 + 20)
        .attr("height", 25)
        .attr("x", d => -(d.data.name.length * 7 + 20) / 2)
        .attr("y", -12.5)
        .attr("rx", 5)
        .attr("ry", 5)
        .style("fill", d => d.depth === 0 ? "#00CC66" : 
                             d.depth === 1 ? "#2E4A7F" : 
                             "rgba(255, 255, 255, 0.1)");
      
      // Node text
      node.append("text")
        .attr("dy", 5)
        .attr("text-anchor", "middle")
        .text(d => d.data.name)
        .style("fill", d => d.depth === 0 ? "#1A2B4C" : "#F0F0F0");
    </script>
  </body>
</html>